/* =========================================================
   Material 3â€“inspired (dark) theme for JekyllChess PGN App
   ========================================================= */

/* ---------------------------------------------------------
   Design tokens
   --------------------------------------------------------- */
:root{
  --md-sys-color-background: #0f1115;
  --md-sys-color-surface: #12141a;
  --md-sys-color-surface-container: #171a21;
  --md-sys-color-surface-container-high: #1b1f29;
  --md-sys-color-outline: rgba(255,255,255,.12);
  --md-sys-color-outline-variant: rgba(255,255,255,.08);

  --md-sys-color-on-background: rgba(255,255,255,.92);
  --md-sys-color-on-surface: rgba(255,255,255,.92);
  --md-sys-color-on-surface-variant: rgba(255,255,255,.72);

  --md-sys-color-primary: #9ec2ff;
  --md-sys-color-primary-container: #243a5c;
  --md-sys-color-on-primary-container: rgba(255,255,255,.92);

  --elev-1: 0 1px 3px rgba(0,0,0,.35);
  --elev-2: 0 4px 12px rgba(0,0,0,.45);
  --elev-3: 0 10px 24px rgba(0,0,0,.55);

  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 22px;

  --dur-1: 120ms;
  --dur-2: 180ms;
  --ease: cubic-bezier(.2,0,0,1);

  --font: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

/* ---------------------------------------------------------
   Base
   --------------------------------------------------------- */
*{ box-sizing:border-box; }

html,body{
  height:100%;
}

body{
  margin:0;
  background:var(--md-sys-color-background);
  color:var(--md-sys-color-on-background);
  font:16px/1.5 var(--font);
}

::selection{
  background:rgba(158,194,255,.25);
}

:focus-visible{
  outline:3px solid rgba(158,194,255,.65);
  outline-offset:2px;
}

/* ---------------------------------------------------------
   Top App Bar
   --------------------------------------------------------- */
.top{
  position:sticky;
  top:0;
  z-index:5;
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  background:var(--md-sys-color-surface-container);
  border-bottom:1px solid var(--md-sys-color-outline-variant);
  box-shadow:var(--elev-1);
}

.top img{
  width:22px;
  height:22px;
  filter:invert(1);
}

.top .title{
  font-weight:600;
  letter-spacing:.2px;
}

/* ---------------------------------------------------------
   Layout
   --------------------------------------------------------- */
.wrap{
  padding:16px;
}

.main{
  display:grid;
  grid-template-columns:1fr;
  gap:16px;
}

@media(min-width:900px){
  .main{
    grid-template-columns:560px 1fr;
    align-items:start;
  }
}

/* ---------------------------------------------------------
   Chessboard container (CRITICAL SECTION)
   --------------------------------------------------------- */
#board{
  width:min(92vw,560px);
  margin:0 auto;
  aspect-ratio:1 / 1;            /* always square */
  background:var(--md-sys-color-surface);
  border:1px solid var(--md-sys-color-outline-variant);
  border-radius:var(--radius-md);
  box-shadow:var(--elev-2);
}

/* IMPORTANT: only top-level wrapper, never all descendants */
#board > div{
  width:100% !important;
}

/* ---------------------------------------------------------
   Controls
   --------------------------------------------------------- */
.controls{
  display:flex;
  gap:10px;
  margin-top:12px;
}

.controls button{
  flex:1;
  appearance:none;
  border:1px solid var(--md-sys-color-outline-variant);
  border-radius:999px;
  padding:10px 14px;
  cursor:pointer;

  background:color-mix(
    in srgb,
    var(--md-sys-color-primary-container) 60%,
    var(--md-sys-color-surface-container) 40%
  );

  color:var(--md-sys-color-on-primary-container);
  font:600 14px/1 var(--font);
  letter-spacing:.3px;

  transition:
    transform var(--dur-1) var(--ease),
    box-shadow var(--dur-2) var(--ease),
    background var(--dur-2) var(--ease);
}

.controls button:hover{
  box-shadow:var(--elev-2);
}

.controls button:active{
  transform:translateY(1px);
  box-shadow:var(--elev-1);
}

/* ---------------------------------------------------------
   Cards
   --------------------------------------------------------- */
.card{
  background:var(--md-sys-color-surface-container);
  border:1px solid var(--md-sys-color-outline-variant);
  border-radius:var(--radius-lg);
  box-shadow:var(--elev-1);
  overflow:hidden;
}

.cardHead{
  padding:12px 14px;
  background:var(--md-sys-color-surface-container-high);
  border-bottom:1px solid var(--md-sys-color-outline-variant);
  font-weight:600;
}

.cardBody{
  padding:14px;
}

/* ---------------------------------------------------------
   Moves list
   --------------------------------------------------------- */
.moves{
  font-size:18px;
  line-height:1.8;
}

.mainline{
  font-weight:700;
}

.variation{
  font-weight:400;
  color:var(--md-sys-color-on-surface-variant);
}

.move{
  cursor:pointer;
  padding:2px 6px;
  border-radius:999px;
  transition:background var(--dur-2) var(--ease);
}

.move:hover{
  background:rgba(158,194,255,.12);
}

.move.active{
  background:var(--md-sys-color-primary-container);
  color:var(--md-sys-color-on-primary-container);
}

/* Inline PGN comments */
.comment{
  color:var(--md-sys-color-on-surface-variant);
  font-style:italic;
  margin-right:4px;
}

/* ---------------------------------------------------------
   Comment UI
   --------------------------------------------------------- */
.comment-ui{
  margin-top:12px;
}

.comment-ui button{
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  font-size:22px;
  font-weight:700;
  cursor:pointer;

  background:var(--md-sys-color-primary-container);
  color:var(--md-sys-color-on-primary-container);
  box-shadow:var(--elev-2);

  transition:
    transform var(--dur-1) var(--ease),
    box-shadow var(--dur-2) var(--ease);
}

.comment-ui button:hover{
  transform:translateY(-1px);
  box-shadow:var(--elev-3);
}

#btnCommentSave{
  margin-left:8px;
}

#commentEditor{
  display:none;
  width:100%;
  min-height:80px;
  margin-top:10px;
  padding:12px 14px;
  resize:vertical;

  background:var(--md-sys-color-surface-container-high);
  color:var(--md-sys-color-on-surface);
  border:1px solid var(--md-sys-color-outline-variant);
  border-radius:14px;

  font:16px/1.5 var(--font);
}

/* ---------------------------------------------------------
   Promotion modal
   --------------------------------------------------------- */
#promo{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(6px);
}

#promo .box{
  display:flex;
  gap:10px;
  padding:14px;
  background:var(--md-sys-color-surface-container-high);
  border:1px solid var(--md-sys-color-outline-variant);
  border-radius:var(--radius-lg);
  box-shadow:var(--elev-3);
}

#promo button{
  font-size:28px;
  padding:10px 14px;
  border:none;
  border-radius:16px;
  cursor:pointer;

  background:var(--md-sys-color-primary-container);
  color:var(--md-sys-color-on-primary-container);

  transition:
    transform var(--dur-1) var(--ease),
    box-shadow var(--dur-2) var(--ease);
}

#promo button:hover{
  box-shadow:var(--elev-2);
}

#promo button:active{
  transform:translateY(1px);
}

/* ---------------------------------------------------------
   Reduced motion
   --------------------------------------------------------- */
@media(prefers-reduced-motion:reduce){
  *{
    transition:none !important;
  }
}
